{"version":3,"sources":["views/widgets/WidgetsDropdown.js","views/widgets/index.js"],"names":["Widget","color","fetchFrom","pushToLink","text","history","useHistory","useState","state","setState","fetchAndSetState","a","fetch","headers","document","cookie","slice","res","status","json","data","count","useEffect","onClick","push","style","height","cursor","header","currentMonth","crntMonth","Date","getMonth","currentYear","getFullYear","currentDay","getDate","WidgetsDropdown","userRole","useSelector","reducer","loggedInUserInfo","loggedInRole","sm","lg"],"mappings":"uLAUMA,EAAS,SAAC,GAA0C,IAAzCC,EAAwC,EAAxCA,MAAOC,EAAiC,EAAjCA,UAAWC,EAAsB,EAAtBA,WAAYC,EAAU,EAAVA,KACvCC,EAAUC,cAChB,EAA0BC,mBAAS,KAAnC,mBAAOC,EAAP,KAAcC,EAAd,KAEMC,EAAgB,uCAAG,8BAAAC,EAAA,sEACHC,MAAMV,EAAW,CACjCW,QAAS,CACP,eAAgB,mBAChB,+BAA2BC,SAASC,OAAOC,MAAM,GAAjD,QAJiB,UAOF,OANbC,EADe,QAObC,OAPa,gCAQAD,EAAIE,OARJ,OAQbC,EARa,OASnBX,EAASW,EAAKC,OATK,2CAAH,qDAiBtB,OAJAC,qBAAU,WACRZ,MAEC,IAED,cAAC,KAAD,CACEa,QAAW,kBAAMlB,EAAQmB,KAAR,UAAgBrB,KACjCsB,MAAS,CAACC,OAAQ,QAASC,OAAQ,WACnC1B,MAAOA,EACP2B,OAAQpB,EACRJ,KAAMA,KAMNyB,ECvCC,WACL,IAAMC,GAAY,IAAIC,MAAOC,WAAW,EACxC,OAAIF,EAAY,GACP,IAAMA,EACRA,EDmCYA,GACfG,GC3CK,IAAIF,MAAOG,cD4ChBC,GAAa,IAAIJ,MAAOK,UAyDfC,UAvDS,WACtB,IACMC,EADWC,aAAY,SAAA/B,GAAK,OAAIA,EAAMgC,QAAQC,oBAC1BC,aAE1B,OACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAMC,GAAG,IAAIC,GAAG,IAAhB,SACE,cAAC,EAAD,CACE3C,MAAQ,mBACRC,UAAS,kDAA+CiC,EAA/C,kBAAmEN,EAAnE,iBAAwFI,GACjG9B,WAAU,sDAAmDgC,EAAnD,kBAAuEN,EAAvE,iBAA4FI,GACtG7B,KAAO,+DAIX,cAAC,IAAD,CAAMuC,GAAG,IAAIC,GAAG,IAAhB,SACE,cAAC,EAAD,CACE3C,MAAQ,gBACRC,UAAS,kDAA+CiC,EAA/C,kBAAmEN,EAAnE,iBAAwFI,GACjG9B,WAAU,sDAAmDgC,EAAnD,kBAAuEN,EAAvE,iBAA4FI,GACtG7B,KAAO,gFAIX,cAAC,IAAD,CAAMuC,GAAG,IAAIC,GAAG,IAAhB,SACE,cAAC,EAAD,CACE3C,MAAQ,mBACRC,UAAS,oDAAiD2B,EAAjD,iBAAsEI,GAC/E9B,WAAU,wDAAqD0B,EAArD,iBAA0EI,GACpF7B,KAAO,uCAIX,cAAC,IAAD,CAAMuC,GAAG,IAAIC,GAAG,IAAhB,SAEe,WAAbN,EACA,cAAC,EAAD,CACErC,MAAQ,kBACRC,UAAY,6BACZC,WAAa,qBACbC,KAAO,iCAGT,cAAC,EAAD,CACEH,MAAQ,kBACRC,UAAS,mDAAgD+B,GACzD9B,WAAU,uDAAoD8B,GAC9D7B,KAAO","file":"static/js/32.1024da83.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { useSelector } from 'react-redux'\r\nimport {\r\n  CWidgetDropdown,\r\n  CRow,\r\n  CCol\r\n} from '@coreui/react'\r\nimport { crntYear, crntMonth } from \".\"\r\n\r\nconst Widget = ({color, fetchFrom, pushToLink, text}) => {\r\n  const history = useHistory()\r\n  const [state, setState] = useState(\"0\")\r\n\r\n  const fetchAndSetState = async () => {\r\n      const res = await fetch(fetchFrom, {\r\n        headers: {\r\n          'content-type': 'application/json',\r\n          'authorization' :`Bearer ${document.cookie.slice(8)} `\r\n        }\r\n      });\r\n      if (res.status === 200) {\r\n        const data = await res.json();\r\n        setState(data.count)\r\n      }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAndSetState()\r\n    //eslint-disable-next-line\r\n  }, [])\r\n  return (\r\n    <CWidgetDropdown\r\n      onClick = {() => history.push(`${pushToLink}`)}\r\n      style = {{height: \"130px\", cursor: \"pointer\"}}\r\n      color={color} \r\n      header={state}\r\n      text={text}\r\n    >\r\n    </CWidgetDropdown>\r\n  )\r\n}\r\n\r\nconst currentMonth = crntMonth()\r\nconst currentYear = crntYear()\r\nconst currentDay = new Date().getDate()\r\n\r\nconst WidgetsDropdown = () => {\r\n  const userInfo = useSelector(state => state.reducer.loggedInUserInfo)\r\n  const userRole = userInfo.loggedInRole\r\n\r\n  return (\r\n    <CRow>\r\n      <CCol sm=\"6\" lg=\"3\">\r\n        <Widget \r\n          color = \"gradient-primary\"\r\n          fetchFrom = {`/applications/count?status=approved&day=${currentDay}&month=${currentMonth}&year=${currentYear}`}\r\n          pushToLink = {`/bayi/islemler/rapor?q=&status=approved&day=${currentDay}&month=${currentMonth}&year=${currentYear}`}\r\n          text = \"Bugünkü Onaylanan Satışlarınız\"\r\n        />\r\n      </CCol>\r\n\r\n      <CCol sm=\"6\" lg=\"3\">\r\n        <Widget \r\n          color = \"gradient-info\"\r\n          fetchFrom = {`/applications/count?status=rejected&day=${currentDay}&month=${currentMonth}&year=${currentYear}`}\r\n          pushToLink = {`/bayi/islemler/rapor?q=&status=rejected&day=${currentDay}&month=${currentMonth}&year=${currentYear}`}\r\n          text = \"Bugünku Sıkıntılı Satışlarınız\"\r\n        />\r\n      </CCol>\r\n\r\n      <CCol sm=\"6\" lg=\"3\">\r\n        <Widget \r\n          color = \"gradient-warning\"\r\n          fetchFrom = {`/applications/count?status=approved&month=${currentMonth}&year=${currentYear}`}\r\n          pushToLink = {`/bayi/islemler/rapor?q=&status=approved&month=${currentMonth}&year=${currentYear}`}\r\n          text = \"Bu Ayki Genel Satışlar\"\r\n        />\r\n      </CCol>\r\n\r\n      <CCol sm=\"6\" lg=\"3\">\r\n      {\r\n        userRole === \"dealer\"?\r\n        <Widget \r\n          color = \"gradient-danger\"\r\n          fetchFrom = \"/report/transactions/count\"\r\n          pushToLink = \"/bayi/rapor/kazanc\"\r\n          text = \"Bu Ayki Kazancınız\"\r\n        />\r\n        :\r\n        <Widget \r\n          color = \"gradient-danger\"\r\n          fetchFrom = {`/applications/count?status=approved&year=${currentYear}`}\r\n          pushToLink = {`/bayi/islemler/rapor?q=&status=approved&year=${currentYear}`}\r\n          text = \"Bu Seneki Genel Satışlar\"\r\n        />\r\n      }\r\n      </CCol>\r\n    </CRow>\r\n  )\r\n}\r\n\r\nexport default WidgetsDropdown;","export function crntYear() {\r\n    return new Date().getFullYear()\r\n}\r\n\r\nexport function crntMonth() {\r\n  const crntMonth = new Date().getMonth()+1\r\n  if (crntMonth < 10)\r\n    return '0' + crntMonth\r\n  return crntMonth\r\n}"],"sourceRoot":""}