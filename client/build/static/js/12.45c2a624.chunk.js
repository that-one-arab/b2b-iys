(this.webpackJsonptest=this.webpackJsonptest||[]).push([[12],{638:function(e,t,n){"use strict";n(642);var r=n(7);t.a=function(e){return e.absolute?Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:e.isLoading?"loader loader-absolute":"",children:Object(r.jsx)("div",{className:e.isLoading?"spinner-border":"",role:"status"})}),e.children]}):e.relative?Object(r.jsxs)("div",{className:"relativePosition",children:[Object(r.jsx)("div",{className:e.isLoading?"loader loader-relative":"",children:Object(r.jsx)("div",{className:e.isLoading?"spinner-border":"",role:"status"})}),e.children]}):void 0}},642:function(e,t,n){},644:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(640);var c=n(639);function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},647:function(e,t,n){"use strict";var r=n(636),c=n(7);t.a=function(e,t){var n=e.color,a=e.body;return Object(c.jsx)(r.db,{position:"top-right",children:Object(c.jsx)(r.bb,{show:!0,autohide:3e3,fade:!0,color:n,className:"applicationToaster",children:Object(c.jsx)(r.cb,{children:a})})},t)}},673:function(e,t,n){},740:function(e,t,n){"use strict";n.r(t);var r=n(63),c=n.n(r),a=n(88),s=n(637),i=n(1),o=n.n(i),u=n(636),l=(n(673),n(644)),j=n(647),d=n(638),b=n(7),f={color:"success",body:"De\u011fi\u015fikleriniz ba\u015far\u0131yla tamamlanm\u0131\u015ft\u0131r!"},h={color:"danger",body:"Bir hata oldu, l\xfctfen daha sonra tekrar deneyin"},O=function(e){var t=e.modalOn,n=e.setModal,r=e.goals,o=e.dealer,O=e.month,x=e.year,v=e.toasters,p=e.triggerToaster,m=e.refetch,g=Object(i.useState)([]),y=Object(s.a)(g,2),_=y[0],k=y[1],w=Object(i.useState)("0"),S=Object(s.a)(w,2),C=S[0],N=S[1],z=Object(i.useState)(0),H=Object(s.a)(z,2),B=H[0],D=H[1],T=Object(i.useState)(!1),M=Object(s.a)(T,2),E=M[0],L=M[1],A=Object(i.useState)(!0),I=Object(s.a)(A,2),J=I[0],R=I[1],Y=Object(i.useState)(!1),F=Object(s.a)(Y,2),K=F[0],P=F[1];function G(){var e=[!1,!1];return"0"!==C&&!0===function(){if(r)return r.find((function(e){return e.service_id===Number(C)}))?(P(!0),!1):(P(!1),!0)}()?e[0]=!0:e[0]=!1,Number(B)>=1?e[1]=!0:e[1]=!1,e}function Q(){N({}),D(0)}function V(){return(V=Object(a.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.user_id,r="".concat(x,"-").concat(O,"-01"),L(!0),e.next=5,fetch("/goal",{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(document.cookie.slice(8)," ")},body:JSON.stringify({userID:t,date:r,service:C,goal:B})});case 5:200===e.sent.status?(p([].concat(Object(l.a)(v),[{element:j.a,textObj:f}])),Q(),n(!1)):p([].concat(Object(l.a)(v),[{element:j.a,textObj:h}])),L(!1),m();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){(function(){var e=Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/services?active=true",{headers:{"content-type":"application/json",authorization:"Bearer ".concat(document.cookie.slice(8)," ")}});case 2:if(200!==(t=e.sent).status){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,k(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(i.useEffect)((function(){for(var e=G(),t=0;t<e.length;t++)if(!1===e[t])return R(!0);return R(!1)}),[C,B]),Object(b.jsx)(u.J,{size:"lg",show:t,onClose:function(){return n(!t)},color:"success",centered:!0,children:Object(b.jsx)(d.a,{relative:!0,isLoading:E,children:Object(b.jsx)(u.Q,{children:Object(b.jsxs)(u.j,{xs:"12",children:[Object(b.jsx)(u.M,{closeButton:!0,children:Object(b.jsx)(u.N,{children:"Hedef ekle"})}),Object(b.jsx)(u.K,{children:Object(b.jsxs)(u.v,{row:!0,children:[Object(b.jsx)(u.j,{xs:"12",lg:"1",children:Object(b.jsx)(u.H,{children:"Hizmet"})}),Object(b.jsx)(u.j,{xs:"12",lg:"3",children:Object(b.jsxs)(u.R,{invalid:K,onChange:function(e){return N(e.target.value)},children:[Object(b.jsx)("option",{value:"0"}),_&&_.map((function(e){return Object(b.jsx)("option",{value:e.service_id,children:e.name},e.service_id)}))]})}),Object(b.jsx)(u.j,{xs:"12",lg:"1",children:Object(b.jsx)(u.H,{children:"Hedef"})}),Object(b.jsx)(u.j,{xs:"12",lg:"2",children:Object(b.jsx)(u.B,{type:"number",value:B,onChange:function(e){return D(e.target.value)}})}),Object(b.jsx)(u.j,{xs:"12",lg:"1"}),Object(b.jsx)(u.j,{xs:"12",lg:"4",style:{position:"relative"},children:Object(b.jsxs)("div",{id:"AddGoal-modal-footer-div",children:[Object(b.jsx)(u.d,{disabled:J,color:"success",onClick:function(){return V.apply(this,arguments)},children:"Hedef ekle"}),Object(b.jsx)(u.d,{color:"secondary",onClick:function(){n(!t),Q()},children:"Kapat"})]})})]})})]})})})})},x=Object(i.memo)(O);function v(){var e=(new Date).getMonth()+1;return e<10?"0"+e:e}function p(e){return e.map((function(e){return{hizmet:e.service,"yap\u0131lan":e.done,hedef:e.goal,for_date:e.for_date,for_user_id:e.for_user_id,service_id:e.service_id,goal_id:e.goal_id,submit_date:e.submit_date,success:e.success}}))}var m=[{key:"hizmet",_style:{width:"80%"}},{key:"yap\u0131lan",_style:{width:"10%"}},{key:"hedef",_style:{width:"10%"}}],g=Object(i.memo)((function(e){var t=e.setDealer,n=Object(i.useState)([]),r=Object(s.a)(n,2),o=r[0],l=r[1];return Object(i.useEffect)((function(){(function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/users",{headers:{"content-type":"application/json",authorization:"Bearer ".concat(document.cookie.slice(8)," ")}});case 2:if(200!==(t=e.sent).status){e.next=10;break}return e.next=6,t.json();case 6:n=e.sent,r=n.filter((function(e){return"dealer"===e.role})),console.log("data: ",r),l(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(b.jsxs)(u.R,{onChange:function(e){return function(e){var n=o.find((function(t){return t.user_id===e}));t(n||{})}(e.target.value)},children:[Object(b.jsx)("option",{value:"0"}),o&&o.map((function(e){return Object(b.jsx)("option",{value:e.user_id,children:e.name},e.user_id)}))]})})),y=Object(i.memo)((function(e){var t=e.setMonth,n=e.setYear,r=function(){for(var e=[],t=12;t>=1;t--)t<10&&(t="0"+t),e.push(t);return e}(),c=function(){for(var e=[],t=(new Date).getFullYear();t>=2e3;t--)e.push(t);return e}();return Object(b.jsxs)("div",{id:"date-fields-div",children:[Object(b.jsx)(u.R,{onChange:function(e){return t(e.target.value)},defaultValue:v(),children:r.map((function(e){return Object(b.jsx)("option",{value:e,children:e},e)}))}),Object(b.jsx)("p",{id:"month-year-seperator-slash",children:"-"}),Object(b.jsx)(u.R,{onChange:function(e){return n(e.target.value)},children:c.map((function(e){return Object(b.jsx)("option",{value:e,children:e},e)}))})]})})),_=function(){var e=Object(i.useState)({}),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(i.useState)(v()),l=Object(s.a)(o,2),j=l[0],d=l[1],f=Object(i.useState)((new Date).getFullYear()),h=Object(s.a)(f,2),O=h[0],_=h[1],k=Object(i.useState)([]),w=Object(s.a)(k,2),S=w[0],C=w[1],N=Object(i.useState)(!1),z=Object(s.a)(N,2),H=z[0],B=z[1],D=Object(i.useState)(!1),T=Object(s.a)(D,2),M=T[0],E=T[1],L=Object(i.useState)([]),A=Object(s.a)(L,2),I=A[0],J=A[1],R=function(){var e=Object(a.a)(c.a.mark((function e(){var t,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.next=3,fetch("/goal?userID=".concat(n.user_id,"&month=").concat(j,"&year=").concat(O),{headers:{"content-type":"application/json",authorization:"Bearer ".concat(document.cookie.slice(8)," ")}});case 3:if(200!==(t=e.sent).status){e.next=10;break}return e.next=7,t.json();case 7:r=e.sent,a=p(r),C(a);case 10:B(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){void 0!==n.user_id&&R()}),[n,j,O]),Object(b.jsxs)(u.e,{children:[I&&I.map((function(e,t){return e.element(e.textObj,t)})),Object(b.jsx)(x,{modalOn:M,setModal:E,toasters:I,triggerToaster:J,refetch:R,goals:S,month:j,year:O,dealer:n}),Object(b.jsxs)(u.f,{children:[Object(b.jsxs)(u.v,{row:!0,children:[Object(b.jsx)(u.j,{xs:"12",lg:"1",children:Object(b.jsx)(u.H,{children:"Bayi"})}),Object(b.jsx)(u.j,{xs:"12",lg:"3",children:Object(b.jsx)(g,{setDealer:r})}),Object(b.jsx)(u.j,{xs:"12",lg:"4"}),Object(b.jsx)(u.j,{xs:"12",lg:"1",children:Object(b.jsx)(u.H,{children:"Tarih"})}),Object(b.jsx)(u.j,{xs:"12",lg:"2",children:Object(b.jsx)(y,{setYear:_,setMonth:d})})]}),Object(b.jsx)("div",{id:"add-goal-div-row",children:Object(b.jsx)(u.d,{color:"info",id:"add-goal-div-row-button",onClick:function(){return E(!0)},disabled:void 0===n.user_id,children:"Hedef ekle"})}),Object(b.jsx)(u.n,{items:S,fields:m,tableFilter:!0,loading:H,hover:!0})]})]})};t.default=o.a.memo(_)}}]);
//# sourceMappingURL=12.45c2a624.chunk.js.map